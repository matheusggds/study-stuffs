<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Testing promises</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
          integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <script>
        document.addEventListener('readystatechange', function(){
            console.log(window.document.readyState)
        });

        function ready() {
            console.log('entrou');
          return new Promise(function(resolve) {
             function checkState() {
               if (document.readyState !== 'loading') {
                 resolve();
               }
             }
                document.addEventListener('readystatechange', checkState);
          checkState();
          });
    }
    
        // Just here for your testing
        function wrapperResolved() {
            var completion = document.querySelector('.completion');
            completion.innerHTML = "Resolved!";
        }

        ready().then(wrapperResolved);


    </script>
</head>
<body>

    <p class="completion">Not completed</p>

    <img src="img/Parma_-_under_sail_in_heavy_weather.jpg" alt="">
  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js"
        integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
</body>
</html>